<ng-template #signUpButton>
  <button data-ui-button type="submit">Sign Up</button>
</ng-template>

<ng-template #signUpPassword>
  <amplify-form-field
    name="password"
    type="password"
    [errors]="formErrors?.password"
    [required]="true"
  ></amplify-form-field>
</ng-template>

<ng-template #signUpFieldset>
  <fieldset data-ui-fieldset [attr.disabled]="this.loading ? '' : null">
    <amplify-form-field
      name="username"
      [errors]="formErrors?.username"
      [required]="true"
    ></amplify-form-field>

    <ng-container
      [ngTemplateOutlet]="customComponents.signUpPassword || signUpPassword"
      [ngTemplateOutletContext]="context"
    ></ng-container>

    <amplify-form-field
      name="email"
      type="email"
      [errors]="formErrors?.email"
      [required]="true"
    ></amplify-form-field>

    <amplify-form-field
      name="phone_number"
      type="text"
      [errors]="formErrors?.phone_number"
      [required]="true"
    ></amplify-form-field>
  </fieldset>
</ng-template>

<div data-ui-container>
  <h2 data-ui-header>{{ this.headerText }}</h2>
  <form
    data-ui-form
    (submit)="onSubmit($event)"
    (input)="onChange()"
    ngNativeValidate
  >
    <ng-container
      [ngTemplateOutlet]="customComponents.signUpFieldset || signUpFieldset"
      [ngTemplateOutletContext]="context"
    ></ng-container>

    <div data-ui-footer>
      <div>
        Have an account?{{ " " }}
        <span data-ui-link (click)="toSignIn()">Sign In</span>
      </div>
      <ng-container
        [ngTemplateOutlet]="customComponents.signUpButton || signUpButton"
        [ngTemplateOutletContext]="context"
      >
      </ng-container>
    </div>
    <amplify-validation-error
      [errors]="formErrors?.cross_field"
    ></amplify-validation-error>
  </form>
</div>
