import { TextField, Flex, PasswordField, Button } from '@aws-amplify/ui-react';
import { TextFieldDemo } from './demo';
import {
  DescriptiveTextFieldExample,
  RequiredTextFieldExample,
  TextFieldStyledPropsExample,
  TextFieldStartEndComponentsExample,
  TextFieldStartEndIconExample,
  TextFieldStartEndComponentAndIconExample,
} from './examples';
import { Example } from '@/components/Example';
import { Fragment } from '@/components/Fragment';

The `TextField` form primitive can be used allow users to input text content.

## Demo

<TextFieldDemo />

## Usage

<Fragment>{() => import('./../shared/requiredAmplifyProvider.mdx')}</Fragment>

Import the `TextField` component and styles and provide a `label` for accessibility/usability.

```jsx
import { TextField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';
const MyApp = () => (
  <TextField
    label="Name"
    placeholder="Galadriel"
    descriptiveText="Please enter valid name"
  />
);
```

<Example>
  <TextField
    label="Name"
    placeholder="Galadriel"
    descriptiveText="Please enter valid name"
  />
</Example>

### Accessibility / Label behavior

<Fragment>{() => import('./../shared/formFieldAccessibility.mdx')}</Fragment>

```jsx
<Flex>
  <TextField label="Search" labelHidden={true} />
  <Button>Search</Button>
</Flex>
```

<Example>
  <Flex>
    <TextField label="Search" labelHidden={true} />
    <Button>Search</Button>
  </Flex>
</Example>

### Sizes

TextField sizes are designed to match styling of other field components such as buttons. There are three sizes: small, (default), and large.

```jsx
<Flex>
  <TextField label="Small" size="small" labelHidden/>
  <Button size="small">Small</Button>
</Flex>

<Flex>
  <TextField label="Default" labelHidden/>
  <Button>Default</Button>
</Flex>

<Flex>
  <TextField label="Large" size="large" labelHidden/>
  <Button size="large">Large</Button>
</Flex>
```

<Example>
  <Flex direction="column" gap="1rem">
    <Flex>
      <TextField label="Small" size="small" labelHidden />
      <Button size="small">Small</Button>
    </Flex>
    <Flex>
      <TextField label="Default" labelHidden />
      <Button>Default</Button>
    </Flex>
    <Flex>
      <TextField label="Large" size="large" labelHidden />
      <Button size="large">Large</Button>
    </Flex>
  </Flex>
</Example>

### Variations

There are two variation styles available: default and `quiet`.

```jsx
<TextField label="Default" />
<TextField label="Quiet"  variation="quiet"/>
```

<Example>
  <TextField label="Default" />
  <TextField label="Quiet" variation="quiet" />
</Example>

### Outer components

Compose field components such as `Button` and `Select` at the start or end of an TextField input using the `outerStartComponent` or `outerEndComponent` props.

```jsx
<Flex gap="1rem" direction="column">
  <TextField label="Start" outerStartComponent={<Button>Start</Button>} />
  <TextField
    label="Start and End"
    outerStartComponent={<Button>Start</Button>}
    outerEndComponent={<Button>End</Button>}
  />
  <TextField label="End" outerEndComponent={<Button>End</Button>} />
  <TextField
    label="Multiple End"
    outerEndComponent={
      <>
        <Button>End</Button>
        <Button>End</Button>
      </>
    }
  />
  <TextField
    label="Multiple Start"
    outerStartComponent={
      <>
        <Button>Start</Button>
        <Button>Start</Button>
      </>
    }
  />
</Flex>
```

<TextFieldStartEndComponentsExample />

### Inner components (icons)

Compose `FieldGroupIcon` or `FieldGroupIconButton` components inside TextField input using innerStartComponent and innerEndComponent.
To create an interactive icon button, use the `FieldGroupIconButton` component. To add an icon that's not interactive, use `FieldGroupIcon` component.

Note: When clicked, `FieldGroupIcon` will focus the field, whereas the `FieldGroupIconButton` will trigger its `onClick` event.

```jsx
<Flex gap="1rem" direction="column">
  <TextField
    label="Start and End"
    innerStartComponent={
      <FieldGroupIcon ariaLabel="">
        {/** Accessibility tip: pass empty ariaLabel for decorative icons. */}
        <IconInfo />
      </FieldGroupIcon>
    }
    innerEndComponent={
      <FieldGroupIconButton
        ariaLabel="Search"
        variation="link"
        onClick={() => alert('ðŸ˜Ž')}
      >
        <IconSearch />
      </FieldGroupIconButton>
    }
  />
</Flex>
```

<Example>
  <TextFieldStartEndIconExample />
</Example>

_You can also both inner and outer components together_

```jsx
<Flex gap="1rem" direction="column">
  <TextField
    label="Start and End inner and outer components"
    outerStartComponent={<Button>Start</Button>}
    outerEndComponent={<Button>End</Button>}
    innerStartComponent={
      <FieldGroupIcon ariaLabel="">
        {/** Accessibility tip: pass empty ariaLabel for decorative icons. */}
        <IconInfo />
      </FieldGroupIcon>
    }
    innerEndComponent={
      <FieldGroupIconButton
        ariaLabel="Search"
        variation="link"
        onClick={() => alert('ðŸ˜Ž')}
      >
        <IconSearch />
      </FieldGroupIconButton>
    }
  />
</Flex>
```

<Example>
  <TextFieldStartEndComponentAndIconExample />
</Example>

### Descriptive text

To provide additional descriptive text of requirements of the field, use the `descriptiveText` field:

```jsx
<TextField
  type="password"
  label="Password"
  descriptiveText={
    <Text as="span" color="rebeccapurple" fontStyle="italic" fontSize="0.8rem">
      Password length must be greater than 8 characters
    </Text>
  }
/>
```

<Example>
  <DescriptiveTextFieldExample />
</Example>

### States

The available TextField states include `isDisabled` and `isReadonly`. A disabled field will be not be focusable not mutable and will not be submitted with form data. A readonly field cannot be edited by the user.

```jsx
<TextField label="Disabled" defaultValue="Disabled" isDisabled={true} />
<TextField label="Readonly" defaultValue="You can't edit me!" isReadOnly={true} />
```

<Example>
  <Flex direction="column" gap="1rem">
    <TextField label="Disabled" defaultValue="Disabled" isDisabled={true} />
    <TextField
      label="Readonly"
      defaultValue="You can't edit me!"
      isReadOnly={true}
    />
  </Flex>
</Example>

### Required fields

Use the `isRequired` prop to specify a required field.

```jsx
<Flex as="form" direction="column" width="20rem">
  <TextField label="Email" type="email" isRequired={true} />
  <Button type="submit">Submit</Button>
</Flex>
```

<Example>
  <Flex as="form" direction="column" width="20rem">
    <TextField label="Email" type="email" isRequired={true} />
    <Button type="submit">Submit</Button>
  </Flex>
</Example>

There is no default styling for required fields. Customize the `label` or `descriptiveText` to instruct the form user of the required field.

```jsx
<Flex as="form" direction="column" width="20rem">
  <TextField
    label={
      <Text>
        Email
        <Text as="span" fontSize="0.8rem" color="red">
          {' '}
          (required)
        </Text>
      </Text>
    }
    type="email"
    isRequired={true}
  />
  <TextField
    label="Password"
    type="password"
    descriptiveText={
      <Text as="span" fontSize="0.8rem" color="red" fontStyle="italic">
        Required
      </Text>
    }
    type="email"
    isRequired={true}
  />
  <Button type="submit">Submit</Button>
</Flex>
```

<Example>
  <RequiredTextFieldExample />
</Example>

### Validation error styling

Use the `hasError` and `errorMessage` fields to mark a TextField as having an validation error.

```jsx
<TextField
  label="Password"
  defaultValue="1234"
  hasError={true}
  errorMessage="Password should not be 1234! ðŸ˜±"
/>
<TextField
  label="Password"
  defaultValue="1234"
  hasError={true}
  variation="quiet"
  errorMessage="Password should not be 1234! ðŸ˜±"
/>
```

<Example>
  <Flex gap="1rem" direction="column">
    <TextField
      label="Password"
      type="password"
      defaultValue="1234"
      hasError={true}
      errorMessage="Password should not be 1234! ðŸ˜±"
    />
    <TextField
      label="Password"
      type="password"
      defaultValue="1234"
      hasError={true}
      variation="quiet"
      errorMessage="Password should not be 1234! ðŸ˜±"
    />
  </Flex>
</Example>

## CSS Styling

### Global styling

To override styling on all TextField primitives, you can set the Amplify CSS variables with the built-in `.amplify-textfield` class.

```css
/* styles.css */
.amplify-textfield {
  --amplify-components-fieldcontrol-border-color: rebeccapurple;
}
```

<Example>
  <TextField
    label="Globally styled field"
    className="globally-styled-textfield"
  />
</Example>

### Local styling

To override styling on a specific TextField, you can use a class selector or style props.

_Using a class selector:_

```css
/* styles.css */
.custom-textfield-class .amplify-input {
  border-radius: 0;
}
```

<Example>
  <TextField className="custom-textfield-class" label="Square field" />
</Example>

_Using style props:_

Flex styling props will be applied to the TextField wrapping Flex component, whereas other style props will be applied to the field. This allows us to change the layout of the label and field, while also styling the input field.

```jsx
<TextField
  direction="row"
  alignItems="baseline"
  label={
    <Text fontWeight="bold" fontSize="1.5rem">
      Name:
    </Text>
  }
  fontSize="1.5rem"
  backgroundColor="#fff1e7"
  color="#000"
  width="400px"
/>
```

<Example>
  <TextFieldStyledPropsExample />
</Example>
