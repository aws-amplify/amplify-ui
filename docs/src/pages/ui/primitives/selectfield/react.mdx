import { Flex, IconArrowDropDown, SelectField } from '@aws-amplify/ui-react';

import { SelectDemo, ControlledSelect } from './demo.tsx';
import { Example } from '@/components/Example';

A SelectField component allows you to create a drop-down list. The `<option>` tags nested inside the component define the available options in the drop-down list.

## Demo

<Example>
  <SelectDemo />
</Example>

## Usage

Import the SelectField primitive and styles.

```jsx
import { SelectField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;
```

<Example>
  <SelectField
    label="Fruit"
    labelHidden={true}
    placeholder="Please select a fruit"
  >
    <option value="apple">Apple</option>
    <option value="banana">Banana</option>
    <option value="orange">Orange</option>
  </SelectField>
</Example>

### Controlled component

```jsx
import { useState } from 'react';
import { SelectField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

const [value, setValue] = useState('');

<SelectField
  label="Fruit"
  labelHidden={true}
  value={value}
  placeholder="Please select a fruit"
  onChange={(e) => setValue(e.target.value)}
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;
```

<Example>
  <ControlledSelect />
</Example>

### Accessibility / Label behavior

The SelectField primitive is accessible by default. A matching `label` HTML element is rendered with the `SelectField` by default,
all that is required is to provide a `label` prop with a `string` or `ReactNode`. If no `id` is provided, one will be automatically
generated and connected to both `label` and `select` elements.

#### How can I visually hide the label while maintaining accessibility?

In some applications it may be desirable to hide the label when the field purpose is visually apparent such as a search field with button.
The `labelHidden` prop can be used to visually hide the label while still keeping the label visible for screenreaders. UX Tip: refrain from doing this
if it would hide important information needed by the user to fill out the field.

```jsx
<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>
```

<Example>
  <SelectField
    label="Fruit"
    labelHidden={true}
    placeholder="Please select a fruit"
  >
    <option value="apple">Apple</option>
    <option value="banana">Banana</option>
    <option value="orange">Orange</option>
  </SelectField>
</Example>

### Sizes

Use the `size` prop to change the SelectField size. Available options are `small`, `large`, and none (default).

```jsx
import { SelectField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
  size="small"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;

<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;

<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
  size="large"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;
```

<Example>
  <Flex direction="column">
    <SelectField
      label="Fruit"
      labelHidden={true}
      placeholder="Please select a fruit"
      size="small"
    >
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
    <SelectField
      label="Fruit"
      labelHidden={true}
      placeholder="Please select a fruit"
    >
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
    <SelectField
      label="Fruit"
      labelHidden={true}
      placeholder="Please select a fruit"
      size="large"
    >
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
  </Flex>
</Example>

### Variation

SelectField comes in 2 variants, `quiet` and none(default). Pass the `variation` prop and set it to either of these values.

```jsx
import { SelectField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</Select>

<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
  variation="quiet"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>
```

<Example>
  <Flex direction="column">
    <SelectField
      label="Fruit"
      labelHidden={true}
      placeholder="Please select a fruit"
    >
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
    <SelectField
      label="Fruit"
      labelHidden={true}
      placeholder="Please select a fruit"
      variation="quiet"
    >
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
  </Flex>
</Example>

### Placeholder

You can set a placeholder option out of box via the `placeholder` props. The value for the placeholder option will set to empty string `""`. If you would like to pass your own placeholder with a custom value, then just simply leave it off and pass your custom one.

```jsx
import { SelectField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

// use the placeholder out of box
<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;

// or pass a custom placeholder
<SelectField label="Fruit" labelHidden={true} defaultValue="DEFAULT">
  <option value="DEFAULT">Please select a fruit</option>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;
```

<Example>
  <Flex direction="column">
    <SelectField
      label="Fruit"
      labelHidden={true}
      placeholder="Please select a fruit"
    >
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
    <SelectField label="Fruit" labelHidden={true} defaultValue="DEFAULT">
      <option value="DEFAULT">Please select a fruit</option>
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
  </Flex>
</Example>

### Descriptive text

To provide additional descriptive text of requirements of the field, use the `descriptiveText` field. It will only be visible when `label` is not hidden.

```jsx
import { SelectField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

<SelectField
  label="Fruit"
  descriptiveText="A fruit of your choice"
  placeholder="Please select a fruit"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;
```

<Example>
  <SelectField
    label="Fruit"
    descriptiveText="A fruit of your choice"
    placeholder="Please select a fruit"
  >
    <option value="apple">Apple</option>
    <option value="banana">Banana</option>
    <option value="orange">Orange</option>
  </SelectField>
</Example>

### State

`isDisabled` is the only available state for SelectField. A disabled field will be not be focusable not mutable and will not be submitted with form data.

```jsx
import { SelectField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

<SelectField
  isDisabled={true}
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;
```

<Example>
  <SelectField
    isDisabled={true}
    label="Fruit"
    labelHidden={true}
    placeholder="Please select a fruit"
  >
    <option value="apple">Apple</option>
    <option value="banana">Banana</option>
    <option value="orange">Orange</option>
  </SelectField>
</Example>

### Icon

You can change the expand icon used in the select. Simply pass the `icon` prop. Also, you can change the icon color by passing the `iconColor` prop.

```jsx
import { SelectField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
  icon={<IconArrowDropDown />}
  iconColor="purple"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;
```

<Example>
  <SelectField
    label="Fruit"
    labelHidden={true}
    placeholder="Please select a fruit"
    icon={<IconArrowDropDown />}
    iconColor="purple"
  >
    <option value="apple">Apple</option>
    <option value="banana">Banana</option>
    <option value="orange">Orange</option>
  </SelectField>
</Example>

## CSS Styling

### Global styling

To override styling on all SelectFields, you can set the Amplify CSS variables with the built-in `.amplify-selectfield` class.

```css
/* styles.css */
.amplify-selectfield {
  --amplify-components-field-control-border-color: rebeccapurple;
}
```

To replace the SelectField styling, unset it:

```css
.amplify-selectfield {
  all: unset;
  /* Add your styling here*/
}
```

### Local styling

To override styling on a specific SelectField, you can use (in order of increasing specificity): a class selector, data attributes, or style props.

_Using a class selector:_

```css
/* styles.css */
.my-custom-selectfield .amplify-select {
  background-color: cyan;
}
```

```jsx
import './styles.css';

<SelectField
  label="Fruit"
  labelHidden={true}
  className="my-custom-selectfield"
  placeholder="Please select a fruit"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>;
```

<Example>
  <SelectField
    label="Fruit"
    labelHidden={true}
    className="my-custom-selectfield"
    placeholder="Please select a fruit"
  >
    <option value="apple">Apple</option>
    <option value="banana">Banana</option>
    <option value="orange">Orange</option>
  </SelectField>
</Example>

_Using data attributes:_

```css
/* styles.css */
/* Override only large size styles */
.amplify-select[data-size='large'] {
  border: 1px solid black;
}

/* Override only quiet variation styles */
.amplify-select[data-variation='quiet'] {
  background-color: blue;
}
```

_Using style props:_

```jsx
<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
  style={{backgroundColor: 'plum'}}
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>
/* OR */
<SelectField
  label="Fruit"
  labelHidden={true}
  placeholder="Please select a fruit"
  backgroundColor="plum"
>
  <option value="apple">Apple</option>
  <option value="banana">Banana</option>
  <option value="orange">Orange</option>
</SelectField>
```

<Example>
  <Flex direction="column">
    <SelectField
      label="Fruit"
      labelHidden={true}
      placeholder="Please select a fruit"
      style={{ backgroundColor: 'plum' }}
    >
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
    <SelectField
      label="Fruit"
      labelHidden={true}
      placeholder="Please select a fruit"
      backgroundColor="plum"
    >
      <option value="apple">Apple</option>
      <option value="banana">Banana</option>
      <option value="orange">Orange</option>
    </SelectField>
  </Flex>
</Example>
