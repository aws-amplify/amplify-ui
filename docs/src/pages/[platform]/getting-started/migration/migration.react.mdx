import { Tabs, TabItem } from '@aws-amplify/ui-react';
import { Alert } from '@aws-amplify/ui-react';

## 3.x to 4.x
### Installation
Install the 4.x version of the `@aws-amplify/ui-react` library.

<Tabs>
<TabItem title="npm">

```shell
npm install aws-amplify@latest @aws-amplify/ui-react@4.x
```

</TabItem>
<TabItem title="yarn">
```shell
yarn add aws-amplify@latest @aws-amplify/ui-react@4.x
```

</TabItem>
</Tabs>

### Update and usage

The following breaking changes were introduced in `@aws-amplify/ui-react` major version `4.0`:

#### 1. We removed the `isMultiline` prop from `TextField`.

Replace any `TextField` components using the `isMultiline` prop with the `TextAreaField` component.

```diff
- <TextField
-  isMultiline
+ <TextAreaField
```

#### 2. Support for text directionality moved to ThemeProvider

<Alert variation="Info" heading="Note">
  If you are NOT using `dir="rtl"` in your application, feel free to skip this item.
</Alert>

We have a dependency on Radix components for Menu, SliderField, Tabs, and Expander. There were a number of changes in the [July 21, 2022 release](https://www.radix-ui.com/docs/primitives/overview/releases#july-21-2022) of `radix-ui/*` packages, but the breaking change for Amplify UI components was removal of support for the `dir` HTML attribute, and the addition of the DirectionProvider. In order to make the transition seamless for most of our users, we've added the
`DirectionProvider` with a default `direction` of `ltr` to the `ThemeProvider`.

For customers with applications using right to left directionality, the example below shows the needed change for apps using the native HTML `dir="rtl"`:

```diff
- <View dir="rtl">
+ <ThemeProvider direction="rtl">
```
Also see: [Internationalization](react/getting-started/internationalization)


#### 3. Legacy Authenticator exports removed

If you are still importing the version 1.x of the Authenticator using the `/legacy/` path, please update to the current version. Exports removed include:

`AmplifyAuthenticator`, `AmplifySignIn`, `AmplifySignOut`, `withAuthenticator`

#### 4. Update any override function calls

Update the override function call to include the `autSignIn` set to enabled. This must be included if you are overriding `Auth.signUp`.

```diff
 async handleSignUp(formData) {
  let { username, password, attributes } = formData;
  // custom username
  username = username.toLowerCase();
  attributes.email = attributes.email.toLowerCase();
  return Auth.signUp({
    username,
    password,
    attributes,
+   autoSignIn: {
+     enabled: true
+   }
  })
}

```

#### 5. Update to the latest version of the `aws-amplify` library.

Update to the latest version of the `aws-amplify` library. You will need at least version `^4.3.29`. 

<Tabs>
<TabItem title="npm">

```shell
npm install aws-amplify@latest
```

</TabItem>
<TabItem title="yarn">
```shell
yarn add aws-amplify@latest
```

</TabItem>
</Tabs>




## 2.x to 3.x

### Installation
Install the 3.x version of the `@aws-amplify/ui-react` library.

<Tabs>
<TabItem title="npm">

```shell
npm install aws-amplify @aws-amplify/ui-react@3.x
```

</TabItem>
<TabItem title="yarn">
```shell
yarn add aws-amplify @aws-amplify/ui-react@3.x
```

</TabItem>
</Tabs>

### Update and usage

The following breaking changes were introduced in `@aws-amplify/ui-react` major version `3.0`:

#### 1. We removed the built-in icons (Icon360, IconSave, etc).

Replace any icon components in use the react-icons package or other React icon libraries in its place.

```diff
- import { IconSave } from '@aws-amplify/ui-react';
+ import { MdSave } from 'react-icons/md';
```

Note: We did not remove the [Icon](/react/components/icon) component, which allows customers to easily add SVG icons using the `pathData` prop.

#### 2. We removed `ShareText` export.

This export has been removed and should no longer be used.

## 1.x to 2.x
### Installation

Install the 2.x version of the `@aws-amplify/ui-react` library.

<Tabs>
<TabItem title="npm">

```shell
npm install aws-amplify @aws-amplify/ui-react@2.x
```

</TabItem>
<TabItem title="yarn">
```shell
yarn add aws-amplify @aws-amplify/ui-react@2.x
```

</TabItem>
</Tabs>

### Update and Usage

Update the **App.js** with the new `Authenticator` and remove the old `AmplifyAuthenticator` as seen below:

**App.js**

```diff
- import { AmplifyAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';
import { Amplify } from 'aws-amplify';

+ import { Authenticator } from '@aws-amplify/ui-react';
+ import '@aws-amplify/ui-react/styles.css';

import awsExports from './aws-exports';
Amplify.configure(awsExports);

 const App = () => (
-  <AmplifyAuthenticator>
-    <div>
-      My App
-      <AmplifySignOut />
-    </div>
-  </AmplifyAuthenticator>
+  <Authenticator>
+      {({ signOut, user }) => (
+        <main>
+          <h1>Hello {user.username}</h1>
+          <button onClick={signOut}>Sign out</button>
+        </main>
+      )}
+    </Authenticator>
);

```

### Authenticator breaking changes (1.x to 2.x)

The latest version of the `Authenticator` component has several differences from earlier versions. Here are a few of the major changes that you'll need to look out for.

#### Slots

All the slot locations have changed with the latest version of the `Authenticator`. To get a
sense of the changes please check out the [Headers and Footers](../connected-components/authenticator/customization#headers--footers) section.

#### Form Fields

The latest version of the `Authenticator` has a different format for the `formFields` prop. It also no long accepts
`inputProps` nor `hint`. Instead it's recommended that you use the [Headers and Footers Slots](../connected-components/authenticator/customization#headers--footers) or use the
[Sign Up Fields customization](../connected-components/authenticator/customization#sign-up-fields). For more information on form field customizations
please see the [Form Field Customization](../connected-components/authenticator/customization#form-field-customization) section.

#### CSS Styling

The latest version of the `Authenticator` has a completely different set of CSS variables. Please look over the [Amplify CSS Variables](../connected-components/authenticator/customization#styling) section for more information.
