To use localization, start by following the steps in the 
[Flutter Localization guide](https://docs.flutter.dev/ui/internationalization). When the guide says to create an .arb file, enter the following into `lib/l10n/amplify_en.arb`:

```json
{
  "signIn": "Sign In - Localized!",
  "@signIn": {
    "description": "Label of the button to sign in the user."
  }
}
```

Then, to add support for another language, create a another file for that language. For example, to add Spanish support, create a file at `lib/l10n/amplify_es.arb`, and add the following:

```json
{
  "signIn": "Iniciar Sesi√≥n"
}
```

This example only updates the 'Sign In' button. To find the full schema for Authenticator-compatible `.arb` file(s), you can check the default `.arb` files that come packaged with the Amplify Authenticator in the [`/src/l10n/src/`](https://github.com/aws-amplify/amplify-flutter/tree/main/packages/authenticator/amplify_authenticator/lib/src/l10n/src) directory.

Next, import the following in the `./lib/main.dart` file:

```dart
import 'package:flutter_localizations/flutter_localizations.dart';
import 'package:flutter_gen/gen_l10n/app_localizations.dart';
```

Then create a `ButtonResolver` and pass it to an `AuthStringResolver`, and in turn pass this to the Authenticator API:

```dart
class LocalizedButtonResolver extends ButtonResolver {
  const LocalizedButtonResolver();

  /// Override the signIn function with a localized value
  @override
  String signIn(BuildContext context) {
    return AppLocalizations.of(context).signIn;
  }
}

const stringResolver = AuthStringResolver(
  buttons: LocalizedButtonResolver(),
);

return Authenticator(
  stringResolver: stringResolver,
  child: // ...
);
```

Finally, update your MaterialApp:

```dart
return MaterialApp(
  title: 'Authenticator Demo',
  theme: ThemeData.light(useMaterial3: true),
  darkTheme: ThemeData.dark(useMaterial3: true),
  localizationsDelegates: const [
    AppLocalizations.delegate,
  ],
  supportedLocales: const [
    Locale('en'), // English
    Locale('es'), // Spanish
  ],
  builder: Authenticator.builder(),
  home: const Scaffold(
    body: Center(
      child: Text('You are logged in!'),
    ),
  ),
);
```

There may be some analysis exceptions in your IDE because, as the Flutter instructions note, Flutter will automatically generate the files at build time. You may need to enable automatic code generation by setting `generate: true` in your app's `pubspec.yaml` file.

### Translate Cognito Error Messages

To translate cognito error messages, you also need to create an ARB file and
a resolver. 

First, add an entry for each error message that you want to translate to your template ARB file, e.g.: 

```json
  "authenticatorCognitoErrorUserNotFound": "Account not found. Please check your username or sign up for a new account.",
  "@errorUserNotFound": {
    "description": "Error message when user account is not found"
  },
```

Note, that a full list of error types that can be translated can be found [here](). 

Then, add a custom `MessageResolver`: 

```dart
class LocalizedMessageResolver extends MessageResolver {
  const LocalizedMessageResolver();

  @override
  String error(BuildContext context, AuthenticatorException exception) {
    final localizations = AppLocalizations.of(context);
    
    if (exception is CognitoAuthenticatorException) {
      final arbKey = exception.getArbKey();
      
      // Handle known error keys with our ARB translations
      switch (arbKey) {
        case 'errorUserNotFound':
          return localizations.authenticatorCognitoErrorUserNotFound;
        // ... other cases you might want to consider 
        default:
          // For unknown keys, fall back to the original Cognito message
          return exception.cognitoException.message;
      }
    }
    
    return exception.message.isNotEmpty 
        ? exception.message 
        : (localizations?.errorUnknown ?? 'Sorry, something went wrong');
  }
}
```

Include the respective message resolver when creating the authenticator:

```dart
const stringResolver = AuthStringResolver(
  messages: LocalizedMessageResolver(),
);

return Authenticator(
  stringResolver: stringResolver,
  child: // ...
);
```
