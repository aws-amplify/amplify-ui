import {
  Button,
  Flex,
  Heading,
  PasswordField,
  TextField,
} from '@aws-amplify/ui-react';
import { PasswordFieldDemo } from './demo';
import {
  ChangePasswordFormExample,
  DescriptiveTextExample,
  ErrorExample,
  HideShowPasswordExample,
  InputStyleExample,
  LoginFormExample,
  RefExample,
  RequiredExample,
  SignUpFormExample,
  StylePropsExample,
} from './examples';
import { Example, ExampleCode } from '@/components/Example';
import { Fragment } from '@/components/Fragment';

The PasswordField primitive allows users to input passwords. It also features full password manager support and an optional show/hide password button for user convenience.

## Demo

<PasswordFieldDemo />

## Usage

Import the `PasswordField` component and styles and provide a `label` for accessibility/usability.

```jsx
import { PasswordField } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';

<PasswordField label="Password" name="password" />;
```

<Example>
  <PasswordField label="Password" name="password" />
</Example>

### Hiding the show password button

Use the `hideShowPassword` prop to hide the show password button.

<Example>
  <HideShowPasswordExample />
  <ExampleCode>
    ```jsx file=./examples/HideShowPasswordExample.tsx ```
  </ExampleCode>
</Example>

### Autocomplete - supporting password managers

Use the `autoComplete` prop to tell browser how to populate a password field. Options for `autoComplete` are `current-password` (default) and `new-password`.

If customers are logging in, setting `autoComplete` is not required because `current-password` is the default. If customers are signing up for a new account, set `autoComplete` to `new-password`.

See [MDN for more information on autocomplete](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete).

_Signup form example: `new-password`_

<Example>
  <SignUpFormExample />
  <ExampleCode>```jsx file=./examples/SignUpFormExample.tsx ```</ExampleCode>
</Example>

_Login form example: `current-password` (default)_

<Example>
  <LoginFormExample />
  <ExampleCode>```jsx file=./examples/LoginFormExample.tsx ```</ExampleCode>
</Example>

_Change password example: `current-password` and `new-password`_

<Example>
  <ChangePasswordFormExample />
  <ExampleCode>
    ```jsx file=./examples/ChangePasswordFormExample.tsx ```
  </ExampleCode>
</Example>

### Accessibility / Label behavior

<Fragment>{() => import('./../shared/formFieldAccessibility.mdx')}</Fragment>

### Sizes

Use the `size` prop to change the visual size of the PasswordField. Three sizes are available: `small`, (default), and `large`.

```jsx
<Flex direction="column" gap="1rem">
  <PasswordField label="Password" name="password" size="small" />
  <PasswordField label="Password" name="password" />
  <PasswordField label="Password" name="password" size="large" />
</Flex>
```

<Example>
  <Flex direction="column" gap="1rem">
    <PasswordField label="Password" name="password" size="small" />
    <PasswordField label="Password" name="password" />
    <PasswordField label="Password" name="password" size="large" />
  </Flex>
</Example>

### Variations

There are two variation styles available: default and `quiet`.

```jsx
<Flex direction="column" gap="1rem">
  <PasswordField label="Password" name="password" />
  <PasswordField label="Password" name="password" variation="quiet" />
</Flex>
```

<Example>
  <Flex direction="column" gap="1rem">
    <PasswordField label="Password" name="password" />
    <PasswordField label="Password" name="password" variation="quiet" />
  </Flex>
</Example>

### Descriptive text

To provide additional descriptive text of requirements of the field, use the `descriptiveText` field.

<Example>
  <DescriptiveTextExample />
  <ExampleCode>
    ```jsx file=./examples/DescriptiveTextExample.tsx ```
  </ExampleCode>
</Example>

### Required fields

Use the `isRequired` prop to specify a required field.

```jsx
<Flex as="form" direction="column" width="20rem">
  <PasswordField label="Password" name="password" isRequired={true} />
  <Button type="submit">Submit</Button>
</Flex>
```

<Example>
  <Flex as="form" direction="column" width="20rem">
    <PasswordField label="Password" name="password" isRequired={true} />
    <Button type="submit">Submit</Button>
  </Flex>
</Example>

There is no default styling for required fields. Customize the `label` or `descriptiveText` to instruct the form user of the required field.

<Example>
  <RequiredExample />
  <ExampleCode>```jsx file=./examples/RequiredExample.tsx ```</ExampleCode>
</Example>

### Validation error styling

Use the `hasError` and `errorMessage` fields to mark a PasswordField as having an validation error.

<Example>
  <ErrorExample />
  <ExampleCode>```jsx file=./examples/ErrorExample.tsx ```</ExampleCode>
</Example>

### Forward refs

<Fragment>{() => import('./../shared/forwardRefAlert.mdx')}</Fragment>

The standard `ref` prop will forward to the underlying `input` element, and the `showPasswordButtonRef` prop forwards to the show password `button` element.

The following is an example demonstrating use of the `ref` and `showPasswordButtonRef` props:

<Example>
  <RefExample />
  <ExampleCode>```tsx file=./examples/RefExample.tsx ```</ExampleCode>
</Example>

## CSS Styling

### Global styling

To override styling on all TextField primitives, you can set the Amplify CSS variables or use the built-in `.amplify-textfield` class.

```css
/* styles.css */
:root {
  --amplify-components-field-border-color: rebeccapurple;
}
/* OR */
.amplify-passwordfield {
  --amplify-components-field-border-color: rebeccapurple;
}
```

<Example>
  <PasswordField
    label="Globally styled password field"
    name="password"
    className="globally-styled-textfield"
  />
</Example>

### Local styling

To override styling on a specific TextField, you can use a class selector or style props.

#### Using a class selector

<Example>
  <PasswordField
    className="custom-passwordfield-class"
    label="Square password field"
    name="password"
  />
  <ExampleCode>
    ```css
    /* styles.css */
    .custom-passwordfield-class .amplify-input,
    .custom-passwordfield-class .amplify-button {
      border-radius: 0;
    }
    ```
  </ExampleCode>
</Example>

#### Using style props

All style props will be applied to the outermost [Flex](/components/flex) component of the PasswordField.

<Example>
  <StylePropsExample />
  <ExampleCode>```jsx file=./examples/StylePropsExample.tsx ```</ExampleCode>
</Example>

<Fragment>{() => import('./../shared/inputStyles.mdx')}</Fragment>

<Example>
  <InputStyleExample />
  <ExampleCode>```jsx file=./examples/InputStyleExample.tsx ```</ExampleCode>
</Example>
