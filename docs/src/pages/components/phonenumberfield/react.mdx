import * as React from 'react';
import { PhoneNumberField } from '@aws-amplify/ui-react';

import { PhoneNumberFieldDemo } from './demo';
import {
  DefaultPhoneNumberFieldExample,
  PhoneNumberFieldAccessibilityExample,
  PhoneNumberFieldAutoCompleteExample,
  PhoneNumberFieldCountryCodePropsExample,
  PhoneNumberFieldDescriptiveTextExample,
  PhoneNumberFieldErrorExample,
  PhoneNumberFieldInputStyleExample,
  PhoneNumberFieldRefExample,
  PhoneNumberFieldSizeExample,
  PhoneNumberFieldStatesExample,
  PhoneNumberFieldStyledRequiredExample,
  PhoneNumberFieldStylePropsExample,
  PhoneNumberFieldVariationExample,
} from './examples';
import { Example, ExampleCode } from '@/components/Example';
import { Fragment } from '@/components/Fragment';

The `PhoneNumberField` form primitive can be used allow users to input a phone number.

## Demo

<PhoneNumberFieldDemo />

## Usage

Import the `PhoneNumberField` component and styles and provide a `label` for accessibility/usability as well as a `defaultCountryCode`
which will auto-populate the country or region code select field.

<Example>
  <DefaultPhoneNumberFieldExample />
  <ExampleCode>

```jsx file=./examples/DefaultPhoneNumberFieldExample.tsx

```

  </ExampleCode>
</Example>

### Country or Region Code Select Properties

The country or region code selector can be customized by setting several properties when using the `PhoneNumberField` primitive. The custom
properties specific to the country or region code selector are the following:

- `defaultCountryCode` (_required_): The default country or region code that will be selected upon render (e.g. `defaultValue={defaultCountryCode}`)
- `countryCodeName`: A name for the country or region code selector for handling form submission (e.g. `name={countryCodeName}`)
- `countryCodeLabel`: A hidden accessible label for the country or region code selector (e.g. `label={countryCodeLabel}`)
- `onCountryCodeChange`: A custom change handler for the country or region code selector (e.g. `onChange={onCountryCodeChange}`)

<Example>
  <PhoneNumberFieldCountryCodePropsExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldCountryCodePropsExample.tsx

```

  </ExampleCode>
</Example>

### Autocomplete - supporting password managers

Use the `autoComplete` prop to tell the browser how to populate the `PhoneNumberField`. By default, the `PhoneNumberField` primitive uses `tel-national`
as the `autoComplete` property for the text field and `tel-country-code` as the `autoComplete` property for the country or region code selector.

If the `PhoneNumberField` primitive is intended to be used in a form that is compatible with most password managers, the `autoComplete` property should
be set to `username` (see [Password Form Styles that Chromium Understands](https://www.chromium.org/developers/design-documents/form-styles-that-chromium-understands)).

<Example>
  <PhoneNumberFieldAutoCompleteExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldAutoCompleteExample.tsx

```

  </ExampleCode>
</Example>

### Accessibility / Label behavior

<Fragment>{() => import('./../shared/formFieldAccessibility.mdx')}</Fragment>

<Example>
  <PhoneNumberFieldAccessibilityExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldAccessibilityExample.tsx

```

  </ExampleCode>
</Example>

### Sizes

`PhoneNumberField` sizes are designed to match styling of other field components such as buttons. There are three sizes: small, (default), and large.

<Example>
  <PhoneNumberFieldSizeExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldSizeExample.tsx

```

  </ExampleCode>
</Example>

### Variations

There are two variation styles available: default and `quiet`.

<Example>
  <PhoneNumberFieldVariationExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldVariationExample.tsx

```

  </ExampleCode>
</Example>

### Descriptive text

To provide additional descriptive text of requirements of the field, use the `descriptiveText` field:

<Example>
  <PhoneNumberFieldDescriptiveTextExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldDescriptiveTextExample.tsx

```

  </ExampleCode>
</Example>

### States

The available `PhoneNumberField` states include `isDisabled` and `isReadonly`. A disabled field will be not be focusable, mutable,
and will not be submitted with form data. A readonly field cannot be edited by the user.

<Example>
  <PhoneNumberFieldStatesExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldStatesExample.tsx

```

  </ExampleCode>
</Example>

### Required fields

Use the `isRequired` prop to specify a required field. There is no default styling for required fields. Customize the `label` or `descriptiveText` to instruct the form user of the required field.

<Example>
  <PhoneNumberFieldStyledRequiredExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldStyledRequiredExample.tsx

```

  </ExampleCode>
</Example>

### Validation error styling

Use the `hasError` and `errorMessage` fields to mark a `PhoneNumberField` as having an validation error.

<Example>
  <PhoneNumberFieldErrorExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldErrorExample.tsx

```

  </ExampleCode>
</Example>

### Forward refs

<Fragment>{() => import('./../shared/forwardRefAlert.mdx')}</Fragment>

The standard `ref` prop will forward to the underlying `input` element, and the `countryCodeRef` prop forwards to the country or region code `select` element.

The following is a contrived example demonstrating use of the `ref` and `countryCodeRef` props:

<Example>
  <PhoneNumberFieldRefExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldRefExample.tsx

```

  </ExampleCode>
</Example>

## Styling

### Global styling

To override styling on all `PhoneNumberField` primitives, you can set the Amplify CSS variables with the built-in `.amplify-phonenumberfield`
and `.amplify-countrycodeselect` class.

<Example>
  <PhoneNumberField
    defaultCountryCode="+1"
    label="Globally styled field"
    className="globally-styled-textfield"
  />
  <ExampleCode>
```css
/* styles.css */
.amplify-phonenumberfield,
.amplify-countrycodeselect {
  --amplify-components-fieldcontrol-border-color: rebeccapurple;
}
```
  </ExampleCode>
</Example>

### Local styling

To override styling on a specific `PhoneNumberField`, you can use a class selector or style props.

#### Using a class selector

<Example>
  <PhoneNumberField
    className="custom-phonenumberfield-class"
    defaultCountryCode="+1"
    label="Square field"
  />
  <ExampleCode>
```css
/* styles.css */
.custom-phonenumberfield-class .amplify-input,
.amplify-select {
  border-radius: 0;
}
```
  </ExampleCode>
</Example>

#### Using style props

All style props will be applied to the outermost [Flex](/components/flex) component of the PhoneNumberField.

<Example>
  <PhoneNumberFieldStylePropsExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldStylePropsExample.tsx

```

  </ExampleCode>
</Example>

<Fragment>{() => import('./../shared/inputStyles.mdx')}</Fragment>

<Example>
  <PhoneNumberFieldInputStyleExample />
  <ExampleCode>

```jsx file=./examples/PhoneNumberFieldInputStyleExample.tsx

```

  </ExampleCode>
</Example>
